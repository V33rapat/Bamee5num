<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô - Bamee 5 Num</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50" th:data-customer-id="${customer != null ? customer.id : ''}" th:data-customer-username="${customer != null ? customer.username : ''}">

<header class="bg-white shadow py-4 px-6 flex justify-between items-center">
    <h1 class="text-xl font-bold text-orange-600">Bamee 5 Num</h1>
    <div id="userNav" class="flex items-center space-x-4" th:if="${customer != null}">
        <a th:href="@{/customer/{id}(id=${customer.id})}" class="text-gray-700 hover:text-orange-600">‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</a>
        <span id="welcomeText" class="font-semibold text-gray-700" th:text="'‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ' + ${customer.username}">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span>
        <button id="logoutBtn" class="text-red-500 hover:text-red-700">Logout</button>
    </div>
    <!-- Error message when customer is null or invalid -->
    <div th:if="${customer == null}" class="flex items-center space-x-4">
        <span class="text-red-600 font-semibold">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
        <a href="/login" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
    </div>
</header>

<!-- Hidden input for customer ID to be accessed by JavaScript -->
<input type="hidden" id="customerId" th:value="${customer != null ? customer.id : ''}" />
<!-- Hidden input for customer username -->
<input type="hidden" id="customerUsername" th:value="${customer != null ? customer.username : ''}" />

<div class="max-w-7xl mx-auto px-4 py-8" th:if="${customer != null}">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-orange-600">üìã ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
        <a th:href="'/customer/' + ${customer.id}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏°‡∏ô‡∏π</a>
    </div>

    <!-- Loading indicator -->
    <div id="loadingIndicator" class="text-center py-8">
        <p class="text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠...</p>
    </div>

    <!-- Empty state -->
    <div id="emptyOrders" class="hidden text-center py-12 bg-white rounded-lg shadow">
        <p class="text-gray-500 text-lg mb-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
        <a th:href="@{/customer/{id}(id=${customer.id})}" class="inline-block bg-orange-500 text-white px-6 py-3 rounded hover:bg-orange-600">‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</a>
    </div>

    <!-- Orders container -->
    <div id="ordersContainer" class="hidden space-y-6">
        <!-- Orders will be dynamically inserted here -->
    </div>
</div>

<!-- Error page content when customer is not found -->
<div class="max-w-7xl mx-auto px-4 py-8 text-center" th:if="${customer == null}">
    <h2 class="text-3xl font-bold text-red-600 mb-4">‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</h2>
    <p class="text-gray-700 mb-4">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
    <a href="/login" class="inline-block bg-orange-500 text-white px-6 py-3 rounded hover:bg-orange-600">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<div id="notifications" class="fixed top-4 right-4 space-y-2 z-50"></div>

<script type="module" src="/js/customer-orders.js"></script>

</body>
</html>
