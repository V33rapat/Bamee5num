<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>Customer - Bamee 5 Num</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-50" th:data-customer-id="${customer != null ? customer.id : ''}" th:data-customer-username="${customer != null ? customer.username : ''}">

<header class="bg-white shadow py-4 px-6 flex justify-between items-center">
    <h1 class="text-xl font-bold text-orange-600">Bamee 5 Num</h1>
    <div id="navButtons" class="space-x-4">
        <a href="/" class="text-gray-700 hover:text-orange-600">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</a>
    </div>
    <div id="userNav" class="hidden flex items-center space-x-4" th:if="${customer != null}">
        <span id="welcomeText" class="font-semibold text-gray-700" th:text="'р╕кр╕зр╕▒р╕кр╕Фр╕╡, ' + ${customer.name}">р╕кр╕зр╕▒р╕кр╕Фр╕╡, р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й</span>
        <a href="/customer-orders" class="text-gray-700 hover:text-orange-600 font-medium">ЁЯУЛ р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Йр╕▒р╕Щ</a>
        <button id="cartBtn" class="bg-orange-500 text-white px-3 py-1 rounded">ЁЯЫТ р╕Хр╕░р╕Бр╕гр╣Йр╕▓ (<span id="cartCount" class="hidden">0</span>)</button>
        <button id="logoutBtn" class="text-red-500 hover:text-red-700">Logout</button>
    </div>
    <!-- Error message when customer is null or invalid -->
    <div th:if="${customer == null}" class="flex items-center space-x-4">
        <span class="text-red-600 font-semibold">р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З</span>
        <a href="/login" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</a>
    </div>
</header>

<!-- Hidden input for customer ID to be accessed by JavaScript -->
<input type="hidden" id="customerId" th:value="${customer != null ? customer.id : ''}" />
<!-- Hidden input for customer username -->
<input type="hidden" id="customerUsername" th:value="${customer != null ? customer.username : ''}" />

<div class="max-w-7xl mx-auto px-4 py-8" th:if="${customer != null}">
    <h2 class="text-3xl font-bold text-orange-600 mb-6">ЁЯУЛ р╣Ар╕бр╕Щр╕╣р╕нр╕▓р╕лр╕▓р╕г</h2>
    <div id="menuGrid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
</div>

<!-- Error page content when customer is not found -->
<div class="max-w-7xl mx-auto px-4 py-8 text-center" th:if="${customer == null}">
    <h2 class="text-3xl font-bold text-red-600 mb-4">тЪая╕П р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф</h2>
    <p class="text-gray-700 mb-4">р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓ р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З</p>
    <a href="/login" class="inline-block bg-orange-500 text-white px-6 py-3 rounded hover:bg-orange-600">р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</a>
</div>

<div id="cartSidebar" class="fixed top-0 right-0 w-80 h-full bg-white shadow-lg p-6 transform translate-x-full transition-transform" th:if="${customer != null}">
    <div class="flex justify-between items-center mb-4">
        <h2 class="font-bold text-lg">р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕Вр╕нр╕Зр╕Йр╕▒р╕Щ</h2>
        <button id="closeCart" class="text-gray-500 hover:text-gray-700">&times;</button>
    </div>
    <div id="cartItems" class="space-y-2"></div>
    <p id="emptyCart" class="text-gray-500 text-center">р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕кр╕┤р╕Щр╕Др╣Йр╕▓</p>
    <div id="cartFooter" class="mt-4 hidden">
        <p class="font-bold">р╕гр╕зр╕б: <span id="cartTotal">0</span></p>
        <button id="placeOrderBtn" class="bg-green-500 text-white w-full py-2 rounded mt-2 hover:bg-green-600">р╕кр╕▒р╣Ир╕Зр╕Ир╕нр╕З</button>
    </div>
</div>

<div id="notifications" class="fixed top-4 right-4 space-y-2 z-50"></div>

<script type="module" src="/js/db.js"></script>
<script type="module" src="/js/landing.js"></script>
<script type="module" src="/js/customer.js"></script>

</body>
</html>
